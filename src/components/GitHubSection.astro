---
import { GitHub } from "./icons";

interface GitHubRepo {
  name: string;
  description: string;
  html_url: string;
}

const GitHubPath = "https://api.github.com/users/Altaskur/repos?per_page=5";

const request = fetch(GitHubPath);
const response = await request;

const data = await response.json();

const repos: GitHubRepo[] = data.map((repo: any) => ({
  name: repo.name,
  description: repo.description,
  html_url: repo.html_url,
}));
---

<section class="github-section">
  <h2>GitHub</h2>
  <p>Ãšltimos repositorios en mi cuenta de GitHub</p>
  <ul>
    {
      repos.map((repo: GitHubRepo) => (
        <li>
          <GitHub />
          <div>
            <h3>{repo.name}</h3>
            <p>{repo.description}</p>
            <a href={repo.html_url} target="_blank" rel="noopener noreferrer">
              Ver en GitHub
            </a>
          </div>
        </li>
      ))
    }
  </ul>
</section>

<style>
  ul {
    display: flex;
    flex-wrap: wrap;
    margin-top: 2.5rem;

    & li {
      display: flex;
      align-items: center;
      gap: 2.5rem;

      div {
        flex: 1 1 300px;
        margin: 1rem;
        max-width: 384px;

        & h3 {
          margin-bottom: 0.5rem;
          text-transform: uppercase;
        }
      }
    }
  }
</style>
